# Copyright 2025 Samvel Khalatyan. All rights reserved.
#
# Use of this source code is governed by a BSD-style
# license that can be found in the LICENSE file.

name: CI Go

on:
  # Manual trigger from GitHub UI
  workflow_dispatch:
    inputs:
      go-version:
        required: true
        type: string
      package:
        required: true
        type: string
  # Trigger from other workflows
  workflow_call:
    inputs:
      go-version:
        required: true
        type: string
      package:
        required: true
        type: string

jobs:
  test:
    defaults:
      run:
        shell: sh
    runs-on: ubuntu-latest

    steps:
    - name: Checkout
      uses: actions/checkout@v5

    - name: Setup Go ${{ inputs.go-version }}
      uses: actions/setup-go@v4
      with:
        go-version: ${{ inputs.go-version }}

    - name: Test
      run: |
        go test -v ${{ inputs.package }}/...
